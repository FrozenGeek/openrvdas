################################################################################
# Device definitions
#
# See README.md in this directory

######################################
grv1:
  category: "device"
  device_type: "Gravimeter"

 # Map from device type field names to names specific for this
  # specific device. Device type fields that are not mapped are
  # ignored.
  fields:
    GravityValue: "Grv1Value"
    GravityError: "Grv1Error"

  ########
  # Optional fields - properties of this physical unit
  serial_number: "22301-15"
  description: "Mounted on transverse frabnatz bulkhead. Probably haunted."

  # List of calibrations that have been performed on this unit, and
  # what the results of were.
  calibration:
    "2019-02-11":
      name: "David Pablo Cohn"
      values:
        bias: 0.13113

    "2018-05-21":
      name: "David Pablo Cohn"
      values:
        bias: 0.13426

######################################
knud:
  category: "device"
  device_type: "Knudsen"

  # Map from device_type field names to names specific for this
  # specific device.
  fields:
    LFDepth: "KnudDepthLF"
    LFValid: "KnudValidLF"
    HFDepth: "KnudDepthHF"
    HFValid: "KnudValidHF"
    SoundSpeed: "KnudSoundSpeed"
    Latitude: "KnudLatitude"
    Longitude: "KnudLongitude"

  ########
  serial_number: "0001AXK"
  description: "Forward depth sonar. Mounted under Bosun's mattress. Allergic to cheese."


################################################################################
# Device type definitions

######################################
Gravimeter:
  category: "device_type"

  format: "{CounterUnits:d}:{GravityValue:d} {GravityError:d}"

  ########
  # Optional metadata to help make sense of the parsed values.
  fields:
    CounterUnits:
      description: "apparently a constant 01"
    GravityValue:
      units: "Flit Count"
      description: "mgal = flit count x 4.994072552 + bias"
    GravityError:
      description: "unknown semantics"

######################################
Knudsen:
  category: "device_type"
  description: "Hobnotz Model 3047"

  # If device type can output multiple formats, include them as a
  # list. Parser will use the first one that matches the whole line.
  # 2014-08-01T00:02:35.805000Z 3.5kHz,473.25,0,,,,1500,-75.938191,176.672195
  format:
    - "3.5kHz,{LFDepth:f},{LFValid:d},12.0kHz,{HFDepth:f},{HFValid:d},{SoundSpeed:d},{Latitude:f},{Longitude:f}"
    - ",,,12.0kHz,{HFDepth:f},{HFValid:d},{SoundSpeed:d},{Latitude:f},{Longitude:f}"
    - "3.5kHz,{LFDepth:f},{LFValid:d},,,,{SoundSpeed:d},{Latitude:f},{Longitude:f}"

  ########
  # Optional metadata to help make sense of the parsed values.
  fields:
    LFDepth:
      units: "meters"
      description:  Depth in meters from transducer"
    LFValid:
      units: "0"
      description: "Valid if present (value may always be zero?)"
    HFDepth:
      units: "meters"
      description:  Depth in meters from transducer"
    HFValid:
      units: "0"
      description: "Valid if present (value may always be zero?)"
    SoundSpeed:
      units: "meters/second"
      description: "Sound speed velocity"
    Latitude:
      units: "degrees north"
      description: "Latitude in degrees north"
    Longitude:
      units: "degrees west"
      description: "Longitude in degrees west"
